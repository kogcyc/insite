<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kogswell Cycles</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <style>
@import url('https://fonts.googleapis.com/css2?family=Supermercado+One&display=swap');
      body {
        padding: 20px;
        margin: 0px;
        background-color: #fd8;
        font-family: sans-serif;
      }
      /* Hide content initially */
      #content {
        display: none; /* Keep content hidden until loaded */
      }
      .logo {
        font-family: "Supermercado One", sans-serif;
        font-size: 42px;
        color: #333;
        margin-left: 1px;
        margin-top: -6px;
        margin-bottom: 4px;
        letter-spacing: -2px;
        -webkit-text-stroke: 1px #333;
      }
      .one {
        background-color: #fff;
      }
      .two {
        background-color: #444;
        color: #fff;
      }
      .three {
        background-color: #733;
        color: #fff;
      }
      .four {
        background-color: #485028;
        color: #fff;
      }.one, .two, .three, .four{
  margin-bottom: 20px;
  border-radius: 9px;
  padding: 1px 20px 8px 20px;
}
    </style>
    <script>
      // Kassette holding Markdown file paths
      const kassette = [
        { fn: "1.md", className: "one" },
        { fn: "2.md", className: "two" },
        { fn: "3.md", className: "three" },
      ]

      function loadMarkdown(fileObj) {
        const fileName = fileObj.fn
        const className = fileObj.className
        const filePath = "./" + className + "/" + fileName
        // console.log(filePath);

        return fetch(filePath)
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok")
            }
            return response.text()
          })
          .then((data) => {
            const converter = new showdown.Converter({
              headerLevelStart: 3,
              noHeaderId: true,
            }) // Disable heading IDs
            const htmlContent = converter.makeHtml(data)
            // console.log(htmlContent);

            // Post-process HTML to remove IDs
            const tempDiv = document.createElement("div")
            tempDiv.innerHTML = htmlContent

            // Create a new div for this file's content
            const contentDiv = document.createElement("div")
            contentDiv.className = className // Use the class name from the kassette entry
            contentDiv.innerHTML = tempDiv.innerHTML // Set the processed HTML content
            // console.log("**" + contentDiv.outerHTML);

            // Append the new div to the content
            document.getElementById("content").appendChild(contentDiv)
          })
          .catch((error) => console.error("Error fetching markdown:", error))
      }


      
async function loadAllMarkdowns() {
  for (const fileObj of kassette) {
    loadMarkdown(fileObj).then(() => {
      // Display content after each markdown is loaded
      document.getElementById("content").style.display = "block";
    }).catch(err => {
      console.error(`Error loading ${fileObj}:`, err);
    });
  }
}



      
      document.addEventListener("DOMContentLoaded", loadAllMarkdowns)
    </script>
  </head>
  <body>
    <h1 class="logo">kogswell</h1>
    <div id="content"></div>
  </body>
</html>
